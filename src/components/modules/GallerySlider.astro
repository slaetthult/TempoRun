---
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/css/scrollbar';
import '../../styles/modules/_gallery-slider.scss';
import Modalbox from "../partials/Modalbox.astro";
---

<div class="gallery-slider">
    <div class="grid-wrap">
        <div class="w12">

            <div class="swiper" data-js="gallery-slider">

                <div class="swiper-wrapper">

                    <div class="swiper-slide">
                        <figure>
                            <picture>
                                <source srcset="https://placehold.co/978x489">
                                <img src="https://placehold.co/978x489" alt="alt" loading="lazy">
                            </picture>
                        </figure>
                    </div>
                    <div class="swiper-slide">
                        <figure>
                            <picture>
                                <source srcset="https://placehold.co/978x489">
                                <img src="https://placehold.co/978x489" alt="alt" loading="lazy">
                            </picture>
                        </figure>
                    </div>
                    <div class="swiper-slide">
                        <figure>
                            <picture>
                                <source srcset="https://placehold.co/978x489">
                                <img src="https://placehold.co/978x489" alt="alt" loading="lazy">
                            </picture>
                        </figure>
                    </div>

                </div>
                <div class="swiper-pagination"></div>

                <div class="swiper-button-prev"></div>
                <div class="swiper-button-next"></div>

                <div class="swiper-scrollbar"></div>
            </div>

            <button data-open-modal="test1">Modalbox 1</button>
            <Modalbox id="test1" classes="my-modal">
                <h1>I am Modalbox 1</h1>
                <button data-close-modal>close it</button>
            </Modalbox>
            <button data-open-modal="test2" classes="my-modal">Modalbox 2</button>
            <Modalbox id="test2">
                <h1>Modalbox 2</h1>
                <button data-close-modal>close it</button>
            </Modalbox>

        </div>
    </div>
</div>

<script>
    import Swiper from 'swiper';
    import { Navigation, Pagination, Autoplay, Scrollbar } from 'swiper/modules';


    const introSlider = {

        vars: {

            swiperQuery:            '*[data-js=gallery-slider]',

        },

        init(){

            introSlider.startScript();

        },

        startScript(){

            const $gallerySliders = document.querySelectorAll(introSlider.vars.swiperQuery);

            for(const $gallerySlider of $gallerySliders){

                const swiper = new Swiper($gallerySlider, {
                    modules: [Navigation, Pagination, Autoplay, Scrollbar],
                    pagination: {
                        el: '.swiper-pagination',
                        clickable: true
                    },
                    navigation: {
                        nextEl: '.swiper-button-next',
                        prevEl: '.swiper-button-prev',
                    },
                    scrollbar: {
                        el: '.swiper-scrollbar',
                        enabled: true,
                        draggable: true
                    },
                    loop: true,
                    speed: 500,
                    autoplay: {
                        delay: 6000
                    }
                });

            }

        }

    }

    introSlider.init();
</script>